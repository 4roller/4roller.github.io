<!doctype html>
<html>

	  
	<head>
		<link rel="stylesheet" href="/node/assets/css/style.css"></link>
	</head>



	<body>

	<div class="container">
		<div class="bottom">			
		</div>
		<button class="play">play</button>
	</div>

	</body>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js "></script>
	<script>
			var big2 = (function(){
			var d = document;
			var hand;
			return {
				getCard: function(c) {
					var el = d.createElement('div');
					el.className = 'card ' + String(c);
					el.setAttribute('draggable', true);
					el.setAttribute('data-value', String(c));
		  		$('.bottom').append(el);
				},
				getRealValue: function(c) {
					var intVal = c.substr(1,2);
					var suitVal = c.substr(0,1);
					var retInt, retSuit, retFinal;

					switch(suitVal) {
						case "d" :
							retSuit = 0.1;
							break;
						case "c" :
							retSuit = 0.2;
							break;
						case "h" :
							retSuit = 0.3;
							break;
						case "s" :
							retSuit = 0.4;
							break;
					}

					switch(intVal) {
						case "10" :
							retInt = 10;
							break;
						case "j" :
							retInt = 11;
							break;
						case "q" :
							retInt = 12;
							break;
						case "k" :
							retInt = 13;
							break;
						case "1" :
							retInt = 14;
							break;
						case "2" :
							retInt = 15;
							break;
						default :
							retInt = parseInt(intVal);
					}
					retFinal = retInt + retSuit;
					return retFinal;
				},
				sortHand: function (a,b) {
					var a1 = big2.getRealValue(a);
					var b1 = big2.getRealValue(b);					
					if(a1<b1) { return -1; }
					if(b1<a1) { return 1; }
					else { return 0; }
				}
			}
		})();


	  // Initialize a socket connection
	  var socket = io.connect(':8090');

	  socket.on('big2Start', function (data) {	  	
	  	hand = data.card;
	  	hand.sort(big2.sortHand);
	  	for (i=0; i< data.card.length; i++) {
		    big2.getCard(hand[i]);
	  	}
	    
	    socket.emit('my other event', { my: 'data blah' });
	  });
	  

	  $('.container').on('click', '.card', function cardClick(){
	  	if( $(this).hasClass('selected') ) {
	  		$(this).removeClass('selected');
	  	} else {
	  		$(this).addClass('selected');
	  	}
	  });

	  $('.container').on('click', '.play', function playSelected(){
	  	var selected = document.querySelectorAll('.selected');
	  	var arr = [];
	  	selected.forEach(function(el) {
	  		arr.push(el.getAttribute('data-value'));
	  	});
	  	socket.emit('my other event', { my: arr });

	  });

	</script>


</html>
